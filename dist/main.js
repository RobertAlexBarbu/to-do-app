(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(r){e(1,arguments);var n=Object.prototype.toString.call(r);return r instanceof Date||"object"===t(r)&&"[object Date]"===n?new Date(r.getTime()):"number"==typeof r||"[object Number]"===n?new Date(r):("string"!=typeof r&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function n(t){return e(1,arguments),r(t).getTime()}function a(t){return e(1,arguments),r(t).getMonth()}function c(t){return e(1,arguments),r(t).getDate()}Math.pow(10,8);var s=6e4,o=36e5;var i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},d=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,l=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function f(e){return e%400==0||e%4==0&&e%100!=0}class g{taskDescription;taskDeadline;taskDeadlineUnformatted;checked;getChecked(){return this.checked}setChecked(e){localStorage.setItem("active","true"),this.checked=e}constructor(t,r,n=!1){this.taskDescription=t,this.taskDeadlineUnformatted=r,this.taskDeadline=function(t,r){var n;e(1,arguments);var a=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(n=null==r?void 0:r.additionalDigits)&&void 0!==n?n:2);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var c,g=function(e){var t,r={},n=e.split(i.dateTimeDelimiter);if(n.length>2)return r;if(/:/.test(n[0])?t=n[0]:(r.date=n[0],t=n[1],i.timeZoneDelimiter.test(r.date)&&(r.date=e.split(i.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){var a=i.timezone.exec(t);a?(r.time=t.replace(a[1],""),r.timezone=a[1]):r.time=t}return r}(t);if(g.date){var k=function(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};var a=n[1]?parseInt(n[1]):null,c=n[2]?parseInt(n[2]):null;return{year:null===c?a:100*c,restDateString:e.slice((n[1]||n[2]).length)}}(g.date,a);c=function(e,t){if(null===t)return new Date(NaN);var r=e.match(d);if(!r)return new Date(NaN);var n=!!r[4],a=m(r[1]),c=m(r[2])-1,s=m(r[3]),o=m(r[4]),i=m(r[5])-1;if(n)return function(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}(0,o,i)?function(e,t,r){var n=new Date(0);n.setUTCFullYear(e,0,4);var a=7*(t-1)+r+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+a),n}(t,o,i):new Date(NaN);var l=new Date(0);return function(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(v[t]||(f(e)?29:28))}(t,c,s)&&function(e,t){return t>=1&&t<=(f(e)?366:365)}(t,a)?(l.setUTCFullYear(t,c,Math.max(a,s)),l):new Date(NaN)}(k.restDateString,k.year)}if(!c||isNaN(c.getTime()))return new Date(NaN);var h,j=c.getTime(),y=0;if(g.time&&(y=function(e){var t=e.match(l);if(!t)return NaN;var r=p(t[1]),n=p(t[2]),a=p(t[3]);return function(e,t,r){return 24===e?0===t&&0===r:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}(r,n,a)?r*o+n*s+1e3*a:NaN}(g.time),isNaN(y)))return new Date(NaN);if(!g.timezone){var b=new Date(j+y),L=new Date(0);return L.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),L.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),L}return h=function(e){if("Z"===e)return 0;var t=e.match(u);if(!t)return 0;var r="+"===t[1]?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,a)?r*(n*o+a*s):NaN}(g.timezone),isNaN(h)?new Date(NaN):new Date(j+y+h)}(r),this.checked=n}getDescription(){return this.taskDescription}setDescription(e){this.taskDescription=e}getDeadline(){return this.taskDeadline}getDeadlineUnformatted(){return this.taskDeadlineUnformatted}static stringifyDate(e,t){let r="";switch(e){case 0:r+="January ";break;case 1:r+="February ";break;case 2:r+="March ";break;case 3:r+="April ";break;case 4:r+="May ";break;case 5:r+="June ";break;case 6:r+="July ";break;case 7:r+="Augsut ";break;case 8:r+="September ";break;case 9:r+="October ";break;case 10:r+="November ";break;case 11:r+="December ";break;default:r+=""}return!0===Number.isNaN(e)&&(r+="No Deadline"),!1===Number.isNaN(t)&&(r+=t),r}taskComponent(){const e=document.createElement("div");e.classList.add("task");const t=document.createElement("div");t.classList.add("task-details");const r=document.createElement("input");r.setAttribute("type","checkbox"),r.classList.add("task-checkbox"),!0===this.getChecked()?r.checked=!0:r.checked=!1;const n=document.createElement("div");n.classList.add("task-name"),n.textContent=this.getDescription();const a=document.createElement("div");return a.classList.add("edit-task-icon"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>trash-can-outline</title><path fill="red" d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z" /></svg>',t.appendChild(r),t.appendChild(n),t.appendChild(a),e.appendChild(t),e}}class k{constructor(e,t=[]){this.name=e,this.tasks=t}name;getName(){return this.name}setName(e){this.name=e}tasks;addTask(e){this.tasks.push(e)}deleteTask(e,t){localStorage.setItem("active","true");let r=0;for(const n of this.getTasks()){if(n.getDescription()===e&&n.getDeadlineUnformatted()===t)break;r+=1}this.getTasks().splice(r,1),k.storeLocal(),k.renderProjects()}getTasks(){return this.tasks}sortTasks(){this.getTasks().sort(((e,t)=>{let r=n(e.getDeadline()),a=n(t.getDeadline());return!0===Number.isNaN(r)&&(r=1/0),!0===Number.isNaN(a)&&(a=1/0),r>a?1:r<a?-1:0}))}static projects=[];static addProject(e){k.projects.push(e)}static deleteProject(e){k.projects.splice(e,1),k.currentProjectIndex=-1,k.storeLocal()}static currentProjectIndex;static storeLocal(){localStorage.setItem("projects",JSON.stringify(k.projects)),localStorage.setItem("currentIndex",JSON.stringify(k.currentProjectIndex))}static getLocal(){const e=[...JSON.parse(localStorage.getItem("projects"))];for(const t of e){const e=new k(t.name);for(const r of t.tasks)e.addTask(new g(r.taskDescription,r.taskDeadlineUnformatted,r.checked));k.addProject(e)}k.currentProjectIndex=JSON.parse(localStorage.getItem("currentIndex"))}static renderProjects(){const e=document.querySelector(".tasks-section"),t=document.querySelector(".projects");if(t.textContent="",0===k.projects.length){const e=document.createElement("div");e.classList.add("no-existing-projects"),e.textContent="Empty...",t.appendChild(e)}if(-1===k.currentProjectIndex){e.textContent="";const t=document.createElement("div");t.classList.add("no-existing-tasks"),t.textContent="Select a project",e.appendChild(t)}const r=document.querySelector("#current-block"),n=document.querySelector(".settings-icon");-1!==k.currentProjectIndex?(r.textContent=k.projects[k.currentProjectIndex].getName(),r.classList.remove("no-project-selected"),r.classList.add("current-project","project"),n.style.visibility="visible"):(r.textContent="No project selected",r.classList.remove("current-project","project"),r.classList.add("no-project-selected"),n.style.visibility="hidden");for(const e of k.projects){const r=document.createElement("div");if(r.classList.add("project"),r.textContent=e.getName(),r.addEventListener("click",(e=>{localStorage.setItem("active","true");let t=0;for(const r of k.projects){if(r.getName()===e.target.textContent)break;t+=1}k.currentProjectIndex=t,k.storeLocal(),k.renderProjects()})),-1!==k.currentProjectIndex&&e.getName()===k.projects[k.currentProjectIndex].getName())if(r.classList.add("current-project"),0===e.getTasks().length){const e=document.querySelector(".tasks-section");e.textContent="";const t=document.createElement("div");t.classList.add("no-existing-tasks"),t.textContent="Empty...",e.appendChild(t)}else e.renderTasks();t.appendChild(r)}}static renderInitial(){void 0===localStorage.active?(k.#e(),k.renderProjects()):(k.getLocal(),k.renderProjects())}static#e(){let e=new k("Default Project");k.addProject(e),e.addTask(new g("Create a new Project","")),e.addTask(new g("Create a new Task","")),k.currentProjectIndex=0,e=new k("Default Project 2"),k.addProject(e),e=new k("Important Project"),k.addProject(e),k.storeLocal()}renderTasks(){const e=document.querySelector(".tasks-section");e.textContent="",this.sortTasks();const t=[];for(const r of this.getTasks()){const n=g.stringifyDate(a(r.getDeadline()),c(r.getDeadline()));if(void 0===t[0]){t.push(n);const r=document.createElement("div");r.classList.add("day-section");const s=document.createElement("div");s.classList.add("day"),s.textContent=n,r.appendChild(s);const o=document.createElement("div");o.classList.add("tasks");for(const e of this.getTasks())g.stringifyDate(a(e.getDeadline()),c(e.getDeadline()))===n&&o.appendChild(k.renderTaskHelper(e));r.appendChild(o),e.appendChild(r)}else if(t.findIndex((e=>e===n))<0){t.push(n);const r=document.createElement("div");r.classList.add("day-section");const s=document.createElement("div");s.classList.add("day"),s.textContent=n,r.appendChild(s);const o=document.createElement("div");o.classList.add("tasks");for(const e of this.getTasks())g.stringifyDate(a(e.getDeadline()),c(e.getDeadline()))===n&&o.appendChild(k.renderTaskHelper(e));r.appendChild(o),e.appendChild(r)}}}static renderTaskHelper(e){const t=e.taskComponent(),r=t.querySelector(".task-checkbox");return!0===r.checked&&t.classList.add("checked-task"),r.addEventListener("click",(r=>{!0===r.target.checked?(e.setChecked(!0),t.classList.add("checked-task")):(e.setChecked(!1),t.classList.remove("checked-task")),k.storeLocal()})),t.querySelector(".edit-task-icon").addEventListener("click",(()=>{k.projects[k.currentProjectIndex].deleteTask(e.getDescription(),e.getDeadlineUnformatted())})),t}}function h(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}k.renderInitial(),function(){const e=document.querySelector(".create-project-modal"),t=document.querySelector("#project-name-input"),r=document.querySelector(".create-project"),n=document.querySelector(".create-project-form");r.addEventListener("click",(()=>{e.classList.add("visible"),t.value="",n.classList.add("active")})),n.addEventListener("click",(e=>{e.stopPropagation()}));let a=!1;const c=document.querySelector(".error");function s(){e.classList.remove("visible"),n.classList.remove("active"),a=!1,c.textContent=""}e.addEventListener("click",s),document.querySelector(".close-new-project-icon").addEventListener("click",s),document.querySelector("#cancel-new-btn").addEventListener("click",s),t.addEventListener("input",(e=>{a=!1,c.textContent="";for(const t of k.projects)if(t.getName()===e.target.value){c.textContent="Project already exists!",a=!0;break}!0===/^\s+$/.test(e.target.value)&&(c.textContent="Invalid project name!",a=!0)})),document.querySelector("#create-new-btn").addEventListener("click",(e=>{if(e.preventDefault(),!0===t.reportValidity()&&!1===a){const e=new k(t.value);k.addProject(e),k.storeLocal(),localStorage.setItem("active","true"),k.renderProjects(),s()}}))}(),function(){const e=document.querySelector(".edit-project-modal"),t=document.querySelector("#project-edit-input"),r=document.querySelector(".edit-project-form");function n(){e.classList.remove("visible"),r.classList.remove("active")}r.addEventListener("click",(e=>{e.stopPropagation()})),document.querySelector(".settings-icon").addEventListener("click",(()=>{-1!==k.currentProjectIndex&&(e.classList.add("visible"),t.value="",t.value=k.projects[k.currentProjectIndex].getName(),r.classList.add("active"))})),e.addEventListener("click",n),document.querySelector(".close-edit-project-icon").addEventListener("click",n),document.querySelector("#cancel-edit-btn").addEventListener("click",n);let a=!1;const c=document.querySelector(".error-edit");t.addEventListener("input",(e=>{a=!1,c.textContent="";for(const t of k.projects)if(t.getName()!==k.projects[k.currentProjectIndex].getName()&&t.getName()===e.target.value){c.textContent="Project already exists!",a=!0;break}!0===/^\s+$/.test(e.target.value)&&(c.textContent="Invalid project name!",a=!0)})),document.querySelector("#save-edit-btn").addEventListener("click",(e=>{e.preventDefault(),!0===t.reportValidity()&&!1===a&&(k.projects[k.currentProjectIndex].setName(t.value),k.storeLocal(),k.renderProjects(),n())})),document.querySelector("#delete-project-btn").addEventListener("click",(e=>{e.preventDefault(),k.deleteProject(k.currentProjectIndex),document.querySelector(".tasks-section").textContent="",k.renderProjects(),n()}))}(),function(){const t=document.querySelector(".add-task-modal"),n=document.querySelector("#task-description"),a=document.querySelector("#task-deadline"),c=function(t,n){var a,c;e(1,arguments);var s=r(t);if(isNaN(s.getTime()))throw new RangeError("Invalid time value");var o=String(null!==(a=null==n?void 0:n.format)&&void 0!==a?a:"extended"),i=String(null!==(c=null==n?void 0:n.representation)&&void 0!==c?c:"complete");if("extended"!==o&&"basic"!==o)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==i&&"time"!==i&&"complete"!==i)throw new RangeError("representation must be 'date', 'time', or 'complete'");var d="",l="",u="extended"===o?"-":"",m="extended"===o?":":"";if("time"!==i){var p=h(s.getDate(),2),v=h(s.getMonth()+1,2),f=h(s.getFullYear(),4);d="".concat(f).concat(u).concat(v).concat(u).concat(p)}if("date"!==i){var g=s.getTimezoneOffset();if(0!==g){var k=Math.abs(g),j=h(Math.floor(k/60),2),y=h(k%60,2);l="".concat(g<0?"+":"-").concat(j,":").concat(y)}else l="Z";var b=""===d?"":"T",L=[h(s.getHours(),2),h(s.getMinutes(),2),h(s.getSeconds(),2)].join(m);d="".concat(d).concat(b).concat(L).concat(l)}return d}(new Date);a.setAttribute("min",c.slice(0,10));const s=document.querySelector("#no-deadline"),o=document.querySelector(".error-add"),i=document.querySelector(".add-task-form");function d(){t.classList.remove("visible"),i.classList.remove("active")}i.addEventListener("click",(e=>{e.stopPropagation()})),document.querySelector(".add-task").addEventListener("click",(()=>{if(-1!==k.currentProjectIndex)t.classList.add("visible"),n.value="",i.classList.add("active"),s.checked=!1,a.value="",o.textContent="",a.removeAttribute("disabled");else{const e=document.querySelector(".select-project-modal"),t=document.querySelector(".select-project");e.classList.add("visible"),t.classList.add("active")}})),t.addEventListener("click",d),document.querySelector(".close-add-task-icon").addEventListener("click",d),document.querySelector("#cancel-add-btn").addEventListener("click",d),s.addEventListener("input",(e=>{!0===e.target.checked?a.disabled=!0:a.disabled=!1}));let l=!1;n.addEventListener("input",(e=>{l=!1,o.textContent="";for(const t of k.projects[k.currentProjectIndex].getTasks())if(t.getDescription()===e.target.value){o.textContent="Task already exists!",l=!0;break}!0===/^\s+$/.test(e.target.value)&&(o.textContent="Invalid task name!",l=!0)})),document.querySelector("#add-btn").addEventListener("click",(e=>{if(e.preventDefault(),!0===n.reportValidity()&&!0===a.reportValidity()&&!1===l){localStorage.setItem("active","true");const e=n.value,t=a.value;k.projects[k.currentProjectIndex].addTask(new g(e,t)),k.storeLocal(),k.renderProjects(),d()}}))}(),function(){const e=document.querySelector(".select-project-modal"),t=document.querySelector(".select-project"),r=document.querySelector(".close-err-icon"),n=document.querySelector("#close-error");function a(){e.classList.remove("visible"),t.classList.remove("active")}e.addEventListener("click",a),n.addEventListener("click",a),r.addEventListener("click",a),t.addEventListener("click",(e=>{e.stopPropagation()}))}()})();