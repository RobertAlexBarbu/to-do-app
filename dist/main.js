(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(n){e(1,arguments);var r=Object.prototype.toString.call(n);return n instanceof Date||"object"===t(n)&&"[object Date]"===r?new Date(n.getTime()):"number"==typeof n||"[object Number]"===r?new Date(n):("string"!=typeof n&&"[object String]"!==r||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function r(t){return e(1,arguments),n(t).getTime()}function a(t){return e(1,arguments),n(t).getMonth()}function c(t){return e(1,arguments),n(t).getDate()}Math.pow(10,8);var o=6e4,s=36e5;var i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},d=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,l=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function g(e){return e%400==0||e%4==0&&e%100!=0}class f{taskDescription;taskDeadline;taskDeadlineUnformatted;checked;getChecked(){return this.checked}setChecked(e){this.checked=e}constructor(t,n,r=!1){this.taskDescription=t,this.taskDeadlineUnformatted=n,this.taskDeadline=function(t,n){var r;e(1,arguments);var a=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(r=null==n?void 0:n.additionalDigits)&&void 0!==r?r:2);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var c,f=function(e){var t,n={},r=e.split(i.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],i.timeZoneDelimiter.test(n.date)&&(n.date=e.split(i.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var a=i.timezone.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}(t);if(f.date){var k=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var a=r[1]?parseInt(r[1]):null,c=r[2]?parseInt(r[2]):null;return{year:null===c?a:100*c,restDateString:e.slice((r[1]||r[2]).length)}}(f.date,a);c=function(e,t){if(null===t)return new Date(NaN);var n=e.match(d);if(!n)return new Date(NaN);var r=!!n[4],a=m(n[1]),c=m(n[2])-1,o=m(n[3]),s=m(n[4]),i=m(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,i)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var a=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+a),r}(t,s,i):new Date(NaN);var l=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(v[t]||(g(e)?29:28))}(t,c,o)&&function(e,t){return t>=1&&t<=(g(e)?366:365)}(t,a)?(l.setUTCFullYear(t,c,Math.max(a,o)),l):new Date(NaN)}(k.restDateString,k.year)}if(!c||isNaN(c.getTime()))return new Date(NaN);var h,j=c.getTime(),y=0;if(f.time&&(y=function(e){var t=e.match(l);if(!t)return NaN;var n=p(t[1]),r=p(t[2]),a=p(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,a)?n*s+r*o+1e3*a:NaN}(f.time),isNaN(y)))return new Date(NaN);if(!f.timezone){var b=new Date(j+y),D=new Date(0);return D.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),D.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),D}return h=function(e){if("Z"===e)return 0;var t=e.match(u);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,a)?n*(r*s+a*o):NaN}(f.timezone),isNaN(h)?new Date(NaN):new Date(j+y+h)}(n),this.checked=r}getDescription(){return this.taskDescription}setDescription(e){this.taskDescription=e}getDeadline(){return this.taskDeadline}getDeadlineUnformatted(){return this.taskDeadlineUnformatted}static stringifyDate(e,t){let n="";switch(e){case 0:n+="January ";break;case 1:n+="February ";break;case 2:n+="March ";break;case 3:n+="April ";break;case 4:n+="May ";break;case 5:n+="June ";break;case 6:n+="July ";break;case 7:n+="Augsut ";break;case 8:n+="September ";break;case 9:n+="October ";break;case 10:n+="November ";break;case 11:n+="December ";break;default:n+=""}return!0===Number.isNaN(e)&&(n+="No Deadline"),!1===Number.isNaN(t)&&(n+=t),n}taskComponent(){const e=document.createElement("div");e.classList.add("task");const t=document.createElement("div");t.classList.add("task-details");const n=document.createElement("input");n.setAttribute("type","checkbox"),n.classList.add("task-checkbox"),!0===this.getChecked()?n.checked=!0:n.checked=!1;const r=document.createElement("div");r.classList.add("task-name"),r.textContent=this.getDescription();const a=document.createElement("div");return a.classList.add("edit-task-icon"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>trash-can-outline</title><path fill="red" d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z" /></svg>',t.appendChild(n),t.appendChild(r),t.appendChild(a),e.appendChild(t),e}}class k{constructor(e,t=[]){this.name=e,this.tasks=t}name;getName(){return this.name}setName(e){this.name=e}tasks;addTask(e){this.tasks.push(e)}deleteTask(e,t){let n=0;for(const r of this.getTasks()){if(r.getDescription()===e&&r.getDeadlineUnformatted()===t)break;n+=1}this.getTasks().splice(n,1),k.storeLocal(),k.renderProjects()}getTasks(){return this.tasks}sortTasks(){this.getTasks().sort(((e,t)=>{let n=r(e.getDeadline()),a=r(t.getDeadline());return!0===Number.isNaN(n)&&(n=1/0),!0===Number.isNaN(a)&&(a=1/0),n>a?1:n<a?-1:0}))}static projects=[];static addProject(e){k.projects.push(e)}static deleteProject(e){k.projects.splice(e,1),k.currentProjectIndex=-1,k.storeLocal()}static currentProjectIndex;static storeLocal(){localStorage.setItem("projects",JSON.stringify(k.projects)),localStorage.setItem("currentIndex",JSON.stringify(k.currentProjectIndex))}static getLocal(){const e=[...JSON.parse(localStorage.getItem("projects"))];for(const t of e){const e=new k(t.name);for(const n of t.tasks)e.addTask(new f(n.taskDescription,n.taskDeadlineUnformatted,n.checked));k.addProject(e)}k.currentProjectIndex=JSON.parse(localStorage.getItem("currentIndex"))}static renderProjects(){const e=document.querySelector(".tasks-section"),t=document.querySelector(".projects");if(t.textContent="",0===k.projects.length){console.log("hey");const e=document.createElement("div");e.classList.add("no-existing-projects"),e.textContent="Empty...",t.appendChild(e)}if(-1===k.currentProjectIndex){e.textContent="";const t=document.createElement("div");t.classList.add("no-existing-tasks"),t.textContent="Select a project",e.appendChild(t)}const n=document.querySelector("#current-block"),r=document.querySelector(".settings-icon");-1!==k.currentProjectIndex?(n.textContent=k.projects[k.currentProjectIndex].getName(),n.classList.remove("no-project-selected"),n.classList.add("current-project","project"),r.style.visibility="visible"):(n.textContent="No project selected",n.classList.remove("current-project","project"),n.classList.add("no-project-selected"),r.style.visibility="hidden");for(const e of k.projects){const n=document.createElement("div");if(n.classList.add("project"),n.textContent=e.getName(),n.addEventListener("click",(e=>{localStorage.setItem("active","true");let t=0;for(const n of k.projects){if(n.getName()===e.target.textContent)break;t+=1}k.currentProjectIndex=t,k.storeLocal(),k.renderProjects()})),-1!==k.currentProjectIndex&&e.getName()===k.projects[k.currentProjectIndex].getName())if(n.classList.add("current-project"),0===e.getTasks().length){const e=document.querySelector(".tasks-section");e.textContent="";const t=document.createElement("div");t.classList.add("no-existing-tasks"),t.textContent="Empty...",e.appendChild(t)}else e.renderTasks();t.appendChild(n)}}static renderInitial(){void 0===localStorage.active?(k.#e(),k.renderProjects()):(k.getLocal(),k.renderProjects())}static#e(){let e=new k("Default Project");k.addProject(e),e.addTask(new f("Create a new Project","")),e.addTask(new f("Create a new Task","")),k.currentProjectIndex=0,e=new k("Default Project 2"),k.addProject(e),e=new k("Important Project"),k.addProject(e),k.storeLocal()}renderTasks(){const e=document.querySelector(".tasks-section");e.textContent="",this.sortTasks(),console.log(this.getTasks());const t=[];for(const n of this.getTasks()){console.log(f.stringifyDate(a(n.getDeadline()),c(n.getDeadline())));const r=f.stringifyDate(a(n.getDeadline()),c(n.getDeadline()));if(void 0===t[0]){t.push(r);const n=document.createElement("div");n.classList.add("day-section");const o=document.createElement("div");o.classList.add("day"),o.textContent=r,n.appendChild(o);const s=document.createElement("div");s.classList.add("tasks");for(const e of this.getTasks())f.stringifyDate(a(e.getDeadline()),c(e.getDeadline()))===r&&s.appendChild(k.renderTaskHelper(e));n.appendChild(s),e.appendChild(n)}else if(t.findIndex((e=>e===r))<0){t.push(r);const n=document.createElement("div");n.classList.add("day-section");const o=document.createElement("div");o.classList.add("day"),o.textContent=r,n.appendChild(o);const s=document.createElement("div");s.classList.add("tasks");for(const e of this.getTasks())f.stringifyDate(a(e.getDeadline()),c(e.getDeadline()))===r&&s.appendChild(k.renderTaskHelper(e));n.appendChild(s),e.appendChild(n)}}}static renderTaskHelper(e){const t=e.taskComponent(),n=t.querySelector(".task-checkbox");return!0===n.checked&&t.classList.add("checked-task"),n.addEventListener("click",(n=>{!0===n.target.checked?(e.setChecked(!0),t.classList.add("checked-task")):(e.setChecked(!1),t.classList.remove("checked-task")),console.log(k.projects),k.storeLocal()})),t.querySelector(".edit-task-icon").addEventListener("click",(()=>{k.projects[k.currentProjectIndex].deleteTask(e.getDescription(),e.getDeadlineUnformatted())})),t}}function h(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}k.renderInitial(),function(){const e=document.querySelector(".create-project-modal"),t=document.querySelector("#project-name-input"),n=document.querySelector(".create-project"),r=document.querySelector(".create-project-form");n.addEventListener("click",(()=>{e.classList.add("visible"),t.value="",r.classList.add("active")})),r.addEventListener("click",(e=>{e.stopPropagation()}));let a=!1;const c=document.querySelector(".error");function o(){e.classList.remove("visible"),r.classList.remove("active"),a=!1,c.textContent=""}e.addEventListener("click",o),document.querySelector(".close-new-project-icon").addEventListener("click",o),document.querySelector("#cancel-new-btn").addEventListener("click",o),t.addEventListener("input",(e=>{a=!1,c.textContent="";for(const t of k.projects)if(t.getName()===e.target.value){c.textContent="Project already exists!",a=!0;break}!0===/^\s+$/.test(e.target.value)&&(c.textContent="Invalid project name!",a=!0)})),document.querySelector("#create-new-btn").addEventListener("click",(e=>{if(e.preventDefault(),!0===t.reportValidity()&&!1===a){const e=new k(t.value);k.addProject(e),k.storeLocal(),localStorage.setItem("active","true"),k.renderProjects(),o()}}))}(),function(){const e=document.querySelector(".edit-project-modal"),t=document.querySelector("#project-edit-input"),n=document.querySelector(".edit-project-form");function r(){e.classList.remove("visible"),n.classList.remove("active")}n.addEventListener("click",(e=>{e.stopPropagation()})),document.querySelector(".settings-icon").addEventListener("click",(()=>{-1!==k.currentProjectIndex&&(e.classList.add("visible"),t.value="",t.value=k.projects[k.currentProjectIndex].getName(),n.classList.add("active"))})),e.addEventListener("click",r),document.querySelector(".close-edit-project-icon").addEventListener("click",r),document.querySelector("#cancel-edit-btn").addEventListener("click",r);let a=!1;const c=document.querySelector(".error-edit");t.addEventListener("input",(e=>{a=!1,c.textContent="";for(const t of k.projects)if(t.getName()!==k.projects[k.currentProjectIndex].getName()&&t.getName()===e.target.value){c.textContent="Project already exists!",a=!0;break}!0===/^\s+$/.test(e.target.value)&&(c.textContent="Invalid project name!",a=!0)})),document.querySelector("#save-edit-btn").addEventListener("click",(e=>{e.preventDefault(),!0===t.reportValidity()&&!1===a&&(k.projects[k.currentProjectIndex].setName(t.value),k.storeLocal(),k.renderProjects(),r())})),document.querySelector("#delete-project-btn").addEventListener("click",(e=>{e.preventDefault(),k.deleteProject(k.currentProjectIndex),document.querySelector(".tasks-section").textContent="",k.renderProjects(),r()}))}(),function(){const t=document.querySelector(".add-task-modal"),r=document.querySelector("#task-description"),a=document.querySelector("#task-deadline"),c=function(t,r){var a,c;e(1,arguments);var o=n(t);if(isNaN(o.getTime()))throw new RangeError("Invalid time value");var s=String(null!==(a=null==r?void 0:r.format)&&void 0!==a?a:"extended"),i=String(null!==(c=null==r?void 0:r.representation)&&void 0!==c?c:"complete");if("extended"!==s&&"basic"!==s)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==i&&"time"!==i&&"complete"!==i)throw new RangeError("representation must be 'date', 'time', or 'complete'");var d="",l="",u="extended"===s?"-":"",m="extended"===s?":":"";if("time"!==i){var p=h(o.getDate(),2),v=h(o.getMonth()+1,2),g=h(o.getFullYear(),4);d="".concat(g).concat(u).concat(v).concat(u).concat(p)}if("date"!==i){var f=o.getTimezoneOffset();if(0!==f){var k=Math.abs(f),j=h(Math.floor(k/60),2),y=h(k%60,2);l="".concat(f<0?"+":"-").concat(j,":").concat(y)}else l="Z";var b=""===d?"":"T",D=[h(o.getHours(),2),h(o.getMinutes(),2),h(o.getSeconds(),2)].join(m);d="".concat(d).concat(b).concat(D).concat(l)}return d}(new Date);a.setAttribute("min",c.slice(0,10));const o=document.querySelector("#no-deadline"),s=document.querySelector(".error-add"),i=document.querySelector(".add-task-form");function d(){t.classList.remove("visible"),i.classList.remove("active")}i.addEventListener("click",(e=>{e.stopPropagation()})),document.querySelector(".add-task").addEventListener("click",(()=>{if(-1!==k.currentProjectIndex)t.classList.add("visible"),r.value="",i.classList.add("active"),o.checked=!1,a.value="",s.textContent="",a.removeAttribute("disabled");else{const e=document.querySelector(".select-project-modal"),t=document.querySelector(".select-project");e.classList.add("visible"),t.classList.add("active")}})),t.addEventListener("click",d),document.querySelector(".close-add-task-icon").addEventListener("click",d),document.querySelector("#cancel-add-btn").addEventListener("click",d),o.addEventListener("input",(e=>{!0===e.target.checked?a.disabled=!0:a.disabled=!1}));let l=!1;r.addEventListener("input",(e=>{l=!1,s.textContent="";for(const t of k.projects[k.currentProjectIndex].getTasks())if(t.getDescription()===e.target.value){s.textContent="Task already exists!",l=!0;break}!0===/^\s+$/.test(e.target.value)&&(s.textContent="Invalid task name!",l=!0)})),document.querySelector("#add-btn").addEventListener("click",(e=>{if(e.preventDefault(),!0===r.reportValidity()&&!0===a.reportValidity()&&!1===l){localStorage.setItem("active","true");const e=r.value,t=a.value;k.projects[k.currentProjectIndex].addTask(new f(e,t)),k.storeLocal(),k.renderProjects(),d()}}))}(),function(){const e=document.querySelector(".select-project-modal"),t=document.querySelector(".select-project"),n=document.querySelector(".close-err-icon"),r=document.querySelector("#close-error");function a(){e.classList.remove("visible"),t.classList.remove("active")}e.addEventListener("click",a),r.addEventListener("click",a),n.addEventListener("click",a),t.addEventListener("click",(e=>{e.stopPropagation()}))}()})();